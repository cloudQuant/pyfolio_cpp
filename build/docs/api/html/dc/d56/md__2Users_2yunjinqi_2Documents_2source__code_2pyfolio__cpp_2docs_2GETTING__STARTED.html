<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Pyfolio C++: Getting Started with Pyfolio C++</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Pyfolio C++<span id="projectnumber">&#160;1.0.0</span>
   </div>
   <div id="projectbrief">High-performance C++20 financial portfolio analysis library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dc/d56/md__2Users_2yunjinqi_2Documents_2source__code_2pyfolio__cpp_2docs_2GETTING__STARTED.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Getting Started with Pyfolio C++</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md39"></a></p>
<p>This guide will help you get up and running with Pyfolio C++, a high-performance financial portfolio analysis library.</p>
<h1><a class="anchor" id="autotoc_md40"></a>
Table of Contents</h1>
<ol type="1">
<li>Installation</li>
<li>Basic Usage</li>
<li>Core Concepts</li>
<li>Performance Tips</li>
<li>Common Patterns</li>
<li>Troubleshooting</li>
</ol>
<h1><a class="anchor" id="autotoc_md41"></a>
Installation</h1>
<h2><a class="anchor" id="autotoc_md42"></a>
Prerequisites</h2>
<ul>
<li><b>C++20 Compiler</b>: GCC 11+, Clang 13+, or MSVC 2022+</li>
<li><b>CMake</b>: Version 3.25 or newer</li>
<li><b>Dependencies</b>: Automatically fetched via CMake</li>
</ul>
<h2><a class="anchor" id="autotoc_md43"></a>
Quick Build</h2>
<div class="fragment"><div class="line">git clone https://github.com/your-org/pyfolio_cpp.git</div>
<div class="line">cd pyfolio_cpp</div>
<div class="line">mkdir build &amp;&amp; cd build</div>
<div class="line">cmake -DCMAKE_BUILD_TYPE=Release ..</div>
<div class="line">make -j$(nproc)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md44"></a>
Advanced Build Options</h2>
<div class="fragment"><div class="line"># Debug build with coverage</div>
<div class="line">cmake -DCMAKE_BUILD_TYPE=Debug -DENABLE_COVERAGE=ON ..</div>
<div class="line"> </div>
<div class="line"># Release with documentation</div>
<div class="line">cmake -DCMAKE_BUILD_TYPE=Release -DBUILD_DOCUMENTATION=ON ..</div>
<div class="line"> </div>
<div class="line"># With static analysis</div>
<div class="line">cmake -DENABLE_CPPCHECK=ON -DENABLE_CLANG_TIDY=ON ..</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md45"></a>
Basic Usage</h1>
<h2><a class="anchor" id="autotoc_md46"></a>
Your First Analysis</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../d3/d30/pyfolio_8h.html">pyfolio/pyfolio.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="../../d8/d00/attribution__example_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a>() {</div>
<div class="line">    <span class="keyword">using namespace </span><a class="code hl_namespace" href="../../d7/df8/namespacepyfolio.html">pyfolio</a>;</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Create sample return data</span></div>
<div class="line">    std::vector&lt;DateTime&gt; dates = {</div>
<div class="line">        <a class="code hl_function" href="../../d6/d4f/classpyfolio_1_1DateTime.html#adfc972d8ea84c03f9a6d9eb9e661b6cd">DateTime::parse</a>(<span class="stringliteral">&quot;2024-01-01&quot;</span>).value(),</div>
<div class="line">        <a class="code hl_function" href="../../d6/d4f/classpyfolio_1_1DateTime.html#adfc972d8ea84c03f9a6d9eb9e661b6cd">DateTime::parse</a>(<span class="stringliteral">&quot;2024-01-02&quot;</span>).value(),</div>
<div class="line">        <a class="code hl_function" href="../../d6/d4f/classpyfolio_1_1DateTime.html#adfc972d8ea84c03f9a6d9eb9e661b6cd">DateTime::parse</a>(<span class="stringliteral">&quot;2024-01-03&quot;</span>).value(),</div>
<div class="line">        <a class="code hl_function" href="../../d6/d4f/classpyfolio_1_1DateTime.html#adfc972d8ea84c03f9a6d9eb9e661b6cd">DateTime::parse</a>(<span class="stringliteral">&quot;2024-01-04&quot;</span>).value(),</div>
<div class="line">        <a class="code hl_function" href="../../d6/d4f/classpyfolio_1_1DateTime.html#adfc972d8ea84c03f9a6d9eb9e661b6cd">DateTime::parse</a>(<span class="stringliteral">&quot;2024-01-05&quot;</span>).value()</div>
<div class="line">    };</div>
<div class="line">    </div>
<div class="line">    std::vector&lt;Return&gt; returns = {0.01, -0.02, 0.015, -0.005, 0.008};</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Create time series</span></div>
<div class="line">    <a class="code hl_class" href="../../d7/ddc/classpyfolio_1_1TimeSeries.html">TimeSeries&lt;Return&gt;</a> portfolio_returns(dates, returns);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Calculate basic metrics</span></div>
<div class="line">    <span class="keyword">auto</span> sharpe = <a class="code hl_function" href="../../d8/dd9/namespacepyfolio_1_1performance.html#aa8dd6ffc556adc3f76dc32645ec6b57c">performance::sharpe_ratio</a>(portfolio_returns);</div>
<div class="line">    <span class="keyword">auto</span> max_dd = <a class="code hl_function" href="../../d8/dd9/namespacepyfolio_1_1performance.html#a919af12e2600a7e77163a20bf6f98609">performance::max_drawdown</a>(portfolio_returns);</div>
<div class="line">    <span class="keyword">auto</span> volatility = performance::volatility(portfolio_returns);</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span> (sharpe.is_ok() &amp;&amp; max_dd.is_ok() &amp;&amp; volatility.is_ok()) {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;Sharpe Ratio: &quot;</span> &lt;&lt; sharpe.value() &lt;&lt; std::endl;</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;Max Drawdown: &quot;</span> &lt;&lt; max_dd.value() * 100 &lt;&lt; <span class="stringliteral">&quot;%&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;Volatility: &quot;</span> &lt;&lt; volatility.value() * 100 &lt;&lt; <span class="stringliteral">&quot;%&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aattribution__example_8cpp_html_ae66f6b31b5ad750f1fe042a706a4e3d4"><div class="ttname"><a href="../../d8/d00/attribution__example_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a></div><div class="ttdeci">int main()</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d00/attribution__example_8cpp_source.html#l00008">attribution_example.cpp:8</a></div></div>
<div class="ttc" id="aclasspyfolio_1_1DateTime_html_adfc972d8ea84c03f9a6d9eb9e661b6cd"><div class="ttname"><a href="../../d6/d4f/classpyfolio_1_1DateTime.html#adfc972d8ea84c03f9a6d9eb9e661b6cd">pyfolio::DateTime::parse</a></div><div class="ttdeci">static Result&lt; DateTime &gt; parse(const std::string &amp;date_string, const std::string &amp;format=&quot;%Y-%m-%d&quot;)</div><div class="ttdoc">Parse datetime from string.</div><div class="ttdef"><b>Definition</b> <a href="../../de/d1b/datetime_8h_source.html#l00150">datetime.h:150</a></div></div>
<div class="ttc" id="aclasspyfolio_1_1TimeSeries_html"><div class="ttname"><a href="../../d7/ddc/classpyfolio_1_1TimeSeries.html">pyfolio::TimeSeries</a></div><div class="ttdoc">High-performance time series container for financial data.</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d51/time__series_8h_source.html#l00022">time_series.h:22</a></div></div>
<div class="ttc" id="anamespacepyfolio_1_1performance_html_a919af12e2600a7e77163a20bf6f98609"><div class="ttname"><a href="../../d8/dd9/namespacepyfolio_1_1performance.html#a919af12e2600a7e77163a20bf6f98609">pyfolio::performance::max_drawdown</a></div><div class="ttdeci">Result&lt; double &gt; max_drawdown(const ReturnSeries &amp;returns)</div><div class="ttdoc">Calculate maximum drawdown.</div><div class="ttdef"><b>Definition</b> <a href="../../d8/de8/drawdown_8h_source.html#l00066">drawdown.h:66</a></div></div>
<div class="ttc" id="anamespacepyfolio_1_1performance_html_aa8dd6ffc556adc3f76dc32645ec6b57c"><div class="ttname"><a href="../../d8/dd9/namespacepyfolio_1_1performance.html#aa8dd6ffc556adc3f76dc32645ec6b57c">pyfolio::performance::sharpe_ratio</a></div><div class="ttdeci">Result&lt; double &gt; sharpe_ratio(const ReturnSeries &amp;returns, double risk_free_rate=constants::DEFAULT_RISK_FREE_RATE, Frequency frequency=Frequency::Daily)</div><div class="ttdoc">Calculate Sharpe ratio.</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d06/ratios_8h_source.html#l00015">ratios.h:15</a></div></div>
<div class="ttc" id="anamespacepyfolio_html"><div class="ttname"><a href="../../d7/df8/namespacepyfolio.html">pyfolio</a></div><div class="ttdef"><b>Definition</b> <a href="../../d6/dfe/bayesian_8h_source.html#l00013">bayesian.h:13</a></div></div>
<div class="ttc" id="apyfolio_8h_html"><div class="ttname"><a href="../../d3/d30/pyfolio_8h.html">pyfolio.h</a></div><div class="ttdoc">Main header file for pyfolio_cpp - High-performance portfolio analysis library.</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md47"></a>
Loading Data from Files</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../d2/db9/data__loader_8h.html">pyfolio/io/data_loader.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Load returns from CSV</span></div>
<div class="line"><span class="keyword">auto</span> returns_result = pyfolio::io::load_returns_csv(<span class="stringliteral">&quot;portfolio_returns.csv&quot;</span>);</div>
<div class="line"><span class="keywordflow">if</span> (returns_result.is_ok()) {</div>
<div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; returns = returns_result.value();</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Calculate comprehensive metrics</span></div>
<div class="line">    <span class="keyword">auto</span> metrics = <a class="code hl_function" href="../../d2/d10/namespacepyfolio_1_1analytics.html#a0562de05a212709b5e0fe358e30c90d0">pyfolio::analytics::calculate_performance_metrics</a>(returns);</div>
<div class="line">    <span class="keywordflow">if</span> (metrics.is_ok()) {</div>
<div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span>&amp; m = metrics.value();</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;Annual Return: &quot;</span> &lt;&lt; m.annual_return * 100 &lt;&lt; <span class="stringliteral">&quot;%&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;Sharpe Ratio: &quot;</span> &lt;&lt; m.sharpe_ratio &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="adata__loader_8h_html"><div class="ttname"><a href="../../d2/db9/data__loader_8h.html">data_loader.h</a></div></div>
<div class="ttc" id="anamespacepyfolio_1_1analytics_html_a0562de05a212709b5e0fe358e30c90d0"><div class="ttname"><a href="../../d2/d10/namespacepyfolio_1_1analytics.html#a0562de05a212709b5e0fe358e30c90d0">pyfolio::analytics::calculate_performance_metrics</a></div><div class="ttdeci">Result&lt; PerformanceMetrics &gt; calculate_performance_metrics(const TimeSeries&lt; Return &gt; &amp;returns, const std::optional&lt; TimeSeries&lt; Return &gt; &gt; &amp;benchmark=std::nullopt, double risk_free_rate=0.02, int periods_per_year=252)</div><div class="ttdoc">Calculate comprehensive performance metrics for a return series.</div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md48"></a>
Core Concepts</h1>
<h2><a class="anchor" id="autotoc_md49"></a>
1. Result&lt;T&gt; Error Handling</h2>
<p>Pyfolio C++ uses the <code>Result&lt;T&gt;</code> monad for robust error handling:</p>
<div class="fragment"><div class="line"><span class="comment">// Always check for errors</span></div>
<div class="line"><span class="keyword">auto</span> result = calculate_something();</div>
<div class="line"><span class="keywordflow">if</span> (result.is_error()) {</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;Error: &quot;</span> &lt;&lt; result.error().message &lt;&lt; std::endl;</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Use the value safely</span></div>
<div class="line"><span class="keyword">auto</span> value = result.value();</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md50"></a>
2. TimeSeries Container</h2>
<p>The <code>TimeSeries&lt;T&gt;</code> class is the foundation for all time-based analysis:</p>
<div class="fragment"><div class="line"><a class="code hl_class" href="../../d7/ddc/classpyfolio_1_1TimeSeries.html">TimeSeries&lt;Return&gt;</a> returns;</div>
<div class="line">returns.<a class="code hl_function" href="../../d7/ddc/classpyfolio_1_1TimeSeries.html#a0299648a8469a9a82dfa15f9f035a704">reserve</a>(10000);  <span class="comment">// Pre-allocate for performance</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Add data efficiently</span></div>
<div class="line"><span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; [date, ret] : data) {</div>
<div class="line">    returns.<a class="code hl_function" href="../../d7/ddc/classpyfolio_1_1TimeSeries.html#a165f6a4758d61017bdcfb78f2457ba24">push_back</a>(date, ret);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Automatic sorting and validation</span></div>
<div class="line">returns.<a class="code hl_function" href="../../d7/ddc/classpyfolio_1_1TimeSeries.html#a6aef72caa37febb0f72b802ef26d15dd">sort_by_time</a>();  <span class="comment">// O(n log n) worst case, O(n) if already sorted</span></div>
<div class="ttc" id="aclasspyfolio_1_1TimeSeries_html_a0299648a8469a9a82dfa15f9f035a704"><div class="ttname"><a href="../../d7/ddc/classpyfolio_1_1TimeSeries.html#a0299648a8469a9a82dfa15f9f035a704">pyfolio::TimeSeries::reserve</a></div><div class="ttdeci">void reserve(size_type n)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d51/time__series_8h_source.html#l00104">time_series.h:104</a></div></div>
<div class="ttc" id="aclasspyfolio_1_1TimeSeries_html_a165f6a4758d61017bdcfb78f2457ba24"><div class="ttname"><a href="../../d7/ddc/classpyfolio_1_1TimeSeries.html#a165f6a4758d61017bdcfb78f2457ba24">pyfolio::TimeSeries::push_back</a></div><div class="ttdeci">void push_back(const DateTime &amp;timestamp, const T &amp;value)</div><div class="ttdoc">Add a data point.</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d51/time__series_8h_source.html#l00143">time_series.h:143</a></div></div>
<div class="ttc" id="aclasspyfolio_1_1TimeSeries_html_a6aef72caa37febb0f72b802ef26d15dd"><div class="ttname"><a href="../../d7/ddc/classpyfolio_1_1TimeSeries.html#a6aef72caa37febb0f72b802ef26d15dd">pyfolio::TimeSeries::sort_by_time</a></div><div class="ttdeci">void sort_by_time()</div><div class="ttdoc">Sort by timestamp (maintains time series integrity) - Optimized.</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d51/time__series_8h_source.html#l00226">time_series.h:226</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md51"></a>
3. SIMD Optimization</h2>
<p>Operations automatically use SIMD when available:</p>
<div class="fragment"><div class="line"><span class="comment">// This automatically uses AVX2/SSE2 if available</span></div>
<div class="line"><span class="keyword">auto</span> correlation = series1.correlation(series2);</div>
<div class="line"><span class="keyword">auto</span> dot_product = series1.dot(series2);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Explicit SIMD control</span></div>
<div class="line"><span class="preprocessor">#ifdef PYFOLIO_HAS_AVX2</span></div>
<div class="line">    <span class="comment">// AVX2-specific optimizations available</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md52"></a>
4. Parallel Processing</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;pyfolio/core/parallel_algorithms.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Parallel metric calculation</span></div>
<div class="line"><span class="keyword">auto</span> metrics = pyfolio::parallel::calculate_metrics(</div>
<div class="line">    large_portfolio, </div>
<div class="line">    std::thread::hardware_concurrency()</div>
<div class="line">);</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md53"></a>
Performance Tips</h1>
<h2><a class="anchor" id="autotoc_md54"></a>
1. Memory Management</h2>
<div class="fragment"><div class="line"><span class="comment">// Pre-allocate containers</span></div>
<div class="line"><a class="code hl_class" href="../../d7/ddc/classpyfolio_1_1TimeSeries.html">TimeSeries&lt;Return&gt;</a> returns;</div>
<div class="line">returns.<a class="code hl_function" href="../../d7/ddc/classpyfolio_1_1TimeSeries.html#a0299648a8469a9a82dfa15f9f035a704">reserve</a>(expected_size);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Use move semantics</span></div>
<div class="line"><span class="keyword">auto</span> processed = std::move(raw_data).process_returns();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Memory pools for high-frequency trading</span></div>
<div class="line">pyfolio::PoolAllocator&lt;Transaction&gt; allocator(1000000);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md55"></a>
2. Efficient Data Access</h2>
<div class="fragment"><div class="line"><span class="comment">// Use spans for zero-copy operations</span></div>
<div class="line">std::span&lt;const double&gt; data_view = returns.<a class="code hl_function" href="../../d7/ddc/classpyfolio_1_1TimeSeries.html#ab0b20c4945cdde977885888f384256c3">values</a>();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Batch operations when possible</span></div>
<div class="line"><span class="keyword">auto</span> [mean, std_dev] = calculate_mean_and_std(returns);</div>
<div class="ttc" id="aclasspyfolio_1_1TimeSeries_html_ab0b20c4945cdde977885888f384256c3"><div class="ttname"><a href="../../d7/ddc/classpyfolio_1_1TimeSeries.html#ab0b20c4945cdde977885888f384256c3">pyfolio::TimeSeries::values</a></div><div class="ttdeci">constexpr const std::vector&lt; T &gt; &amp; values() const noexcept</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d51/time__series_8h_source.html#l00125">time_series.h:125</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md56"></a>
3. Rolling Calculations</h2>
<div class="fragment"><div class="line"><span class="comment">// Optimized O(n) rolling calculations</span></div>
<div class="line"><span class="keyword">auto</span> rolling_sharpe = returns.<a class="code hl_function" href="../../d7/ddc/classpyfolio_1_1TimeSeries.html#a4d4c9d331becbed701eacccc2b29ae15">rolling</a>(252, [](<span class="keyword">auto</span> window) {</div>
<div class="line">    <span class="keywordflow">return</span> calculate_sharpe_ratio(window);</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Built-in optimized versions</span></div>
<div class="line"><span class="keyword">auto</span> rolling_mean = returns.<a class="code hl_function" href="../../d7/ddc/classpyfolio_1_1TimeSeries.html#a09b5e0db91c49c4ef4b768f34e838a6e">rolling_mean</a>(30);</div>
<div class="line"><span class="keyword">auto</span> rolling_std = returns.<a class="code hl_function" href="../../d7/ddc/classpyfolio_1_1TimeSeries.html#aa7bb9fb26a605ffa13f550d8597c968d">rolling_std</a>(30);</div>
<div class="ttc" id="aclasspyfolio_1_1TimeSeries_html_a09b5e0db91c49c4ef4b768f34e838a6e"><div class="ttname"><a href="../../d7/ddc/classpyfolio_1_1TimeSeries.html#a09b5e0db91c49c4ef4b768f34e838a6e">pyfolio::TimeSeries::rolling_mean</a></div><div class="ttdeci">Result&lt; TimeSeries&lt; T &gt; &gt; rolling_mean(size_type window) const</div><div class="ttdoc">Calculate rolling mean (optimized)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d51/time__series_8h_source.html#l00580">time_series.h:580</a></div></div>
<div class="ttc" id="aclasspyfolio_1_1TimeSeries_html_a4d4c9d331becbed701eacccc2b29ae15"><div class="ttname"><a href="../../d7/ddc/classpyfolio_1_1TimeSeries.html#a4d4c9d331becbed701eacccc2b29ae15">pyfolio::TimeSeries::rolling</a></div><div class="ttdeci">Result&lt; TimeSeries&lt; T &gt; &gt; rolling(size_type window_size, F &amp;&amp;func) const</div><div class="ttdoc">Rolling window operation.</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d51/time__series_8h_source.html#l00398">time_series.h:398</a></div></div>
<div class="ttc" id="aclasspyfolio_1_1TimeSeries_html_aa7bb9fb26a605ffa13f550d8597c968d"><div class="ttname"><a href="../../d7/ddc/classpyfolio_1_1TimeSeries.html#aa7bb9fb26a605ffa13f550d8597c968d">pyfolio::TimeSeries::rolling_std</a></div><div class="ttdeci">Result&lt; TimeSeries&lt; T &gt; &gt; rolling_std(size_type window) const</div><div class="ttdoc">Calculate rolling standard deviation (optimized)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d51/time__series_8h_source.html#l00623">time_series.h:623</a></div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md57"></a>
Common Patterns</h1>
<h2><a class="anchor" id="autotoc_md58"></a>
1. Comprehensive Analysis</h2>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> analyze_portfolio(<span class="keyword">const</span> <a class="code hl_class" href="../../d7/ddc/classpyfolio_1_1TimeSeries.html">TimeSeries&lt;Return&gt;</a>&amp; returns, </div>
<div class="line">                      <span class="keyword">const</span> <a class="code hl_class" href="../../d7/ddc/classpyfolio_1_1TimeSeries.html">TimeSeries&lt;Return&gt;</a>&amp; benchmark) {</div>
<div class="line">    <span class="comment">// Basic metrics</span></div>
<div class="line">    <span class="keyword">auto</span> metrics = <a class="code hl_function" href="../../d2/d10/namespacepyfolio_1_1analytics.html#a0562de05a212709b5e0fe358e30c90d0">pyfolio::analytics::calculate_performance_metrics</a>(</div>
<div class="line">        returns, benchmark, 0.02, 252);</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span> (metrics.is_error()) {</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Analysis failed: &quot;</span> &lt;&lt; metrics.error().message &lt;&lt; std::endl;</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; m = metrics.value();</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Print results</span></div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;=== Portfolio Analysis ===&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Annual Return: &quot;</span> &lt;&lt; m.annual_return * 100 &lt;&lt; <span class="stringliteral">&quot;%&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Volatility: &quot;</span> &lt;&lt; m.annual_volatility * 100 &lt;&lt; <span class="stringliteral">&quot;%&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Sharpe Ratio: &quot;</span> &lt;&lt; m.sharpe_ratio &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Max Drawdown: &quot;</span> &lt;&lt; m.max_drawdown * 100 &lt;&lt; <span class="stringliteral">&quot;%&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Beta: &quot;</span> &lt;&lt; m.beta &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Alpha: &quot;</span> &lt;&lt; m.alpha * 100 &lt;&lt; <span class="stringliteral">&quot;%&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md59"></a>
2. Risk Analysis</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../df/d46/var_8h.html">pyfolio/risk/var.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> risk_analysis(<span class="keyword">const</span> <a class="code hl_class" href="../../d7/ddc/classpyfolio_1_1TimeSeries.html">TimeSeries&lt;Return&gt;</a>&amp; returns) {</div>
<div class="line">    <span class="comment">// Value at Risk</span></div>
<div class="line">    <span class="keyword">auto</span> var_95 = pyfolio::risk::value_at_risk(returns, 0.95);</div>
<div class="line">    <span class="keyword">auto</span> var_99 = pyfolio::risk::value_at_risk(returns, 0.99);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Conditional VaR</span></div>
<div class="line">    <span class="keyword">auto</span> cvar_95 = <a class="code hl_function" href="../../d2/da5/namespacepyfolio_1_1risk.html#ac091b780b885e60eb245538dd9ec1910">pyfolio::risk::conditional_var</a>(returns, 0.95);</div>
<div class="line">    </div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;VaR (95%): &quot;</span> &lt;&lt; var_95.value() * 100 &lt;&lt; <span class="stringliteral">&quot;%&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;VaR (99%): &quot;</span> &lt;&lt; var_99.value() * 100 &lt;&lt; <span class="stringliteral">&quot;%&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;CVaR (95%): &quot;</span> &lt;&lt; cvar_95.value() * 100 &lt;&lt; <span class="stringliteral">&quot;%&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">}</div>
<div class="ttc" id="anamespacepyfolio_1_1risk_html_ac091b780b885e60eb245538dd9ec1910"><div class="ttname"><a href="../../d2/da5/namespacepyfolio_1_1risk.html#ac091b780b885e60eb245538dd9ec1910">pyfolio::risk::conditional_var</a></div><div class="ttdeci">Result&lt; double &gt; conditional_var(const ReturnSeries &amp;returns, double confidence_level=constants::DEFAULT_CONFIDENCE_LEVEL)</div><div class="ttdoc">Calculate Conditional Value at Risk (Expected Shortfall)</div><div class="ttdef"><b>Definition</b> <a href="../../df/d46/var_8h_source.html#l00603">var.h:603</a></div></div>
<div class="ttc" id="avar_8h_html"><div class="ttname"><a href="../../df/d46/var_8h.html">var.h</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md60"></a>
3. Performance Attribution</h2>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> attribution_analysis(<span class="keyword">const</span> <a class="code hl_class" href="../../d7/ddc/classpyfolio_1_1TimeSeries.html">TimeSeries&lt;Return&gt;</a>&amp; portfolio,</div>
<div class="line">                         <span class="keyword">const</span> <a class="code hl_class" href="../../d7/ddc/classpyfolio_1_1TimeSeries.html">TimeSeries&lt;Return&gt;</a>&amp; benchmark,</div>
<div class="line">                         <span class="keyword">const</span> <a class="code hl_typedef" href="../../d7/df8/namespacepyfolio.html#a8b225a867ab95979be89a7d9e8519eb1">PositionSeries</a>&amp; <a class="code hl_namespace" href="../../df/d8b/namespacepyfolio_1_1positions.html">positions</a>) {</div>
<div class="line">    <span class="keyword">auto</span> <a class="code hl_namespace" href="../../dc/dc6/namespacepyfolio_1_1attribution.html">attribution</a> = pyfolio::attribution::brinson_attribution(</div>
<div class="line">        portfolio, benchmark, <a class="code hl_namespace" href="../../df/d8b/namespacepyfolio_1_1positions.html">positions</a>);</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_namespace" href="../../dc/dc6/namespacepyfolio_1_1attribution.html">attribution</a>.is_ok()) {</div>
<div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span>&amp; attr = <a class="code hl_namespace" href="../../dc/dc6/namespacepyfolio_1_1attribution.html">attribution</a>.value();</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;Selection Effect: &quot;</span> &lt;&lt; attr.selection_effect * 100 &lt;&lt; <span class="stringliteral">&quot;%&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;Allocation Effect: &quot;</span> &lt;&lt; attr.allocation_effect * 100 &lt;&lt; <span class="stringliteral">&quot;%&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="anamespacepyfolio_1_1attribution_html"><div class="ttname"><a href="../../dc/dc6/namespacepyfolio_1_1attribution.html">pyfolio::attribution</a></div><div class="ttdef"><b>Definition</b> <a href="../../da/dd4/attribution_8h_source.html#l00013">attribution.h:13</a></div></div>
<div class="ttc" id="anamespacepyfolio_1_1positions_html"><div class="ttname"><a href="../../df/d8b/namespacepyfolio_1_1positions.html">pyfolio::positions</a></div><div class="ttdef"><b>Definition</b> <a href="../../d0/db7/allocation_8h_source.html#l00012">allocation.h:12</a></div></div>
<div class="ttc" id="anamespacepyfolio_html_a8b225a867ab95979be89a7d9e8519eb1"><div class="ttname"><a href="../../d7/df8/namespacepyfolio.html#a8b225a867ab95979be89a7d9e8519eb1">pyfolio::PositionSeries</a></div><div class="ttdeci">std::vector&lt; Position &gt; PositionSeries</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d49/types_8h_source.html#l00199">types.h:199</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md61"></a>
4. Visualization</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../d1/dcd/plotly__enhanced_8h.html">pyfolio/visualization/plotly_enhanced.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> create_tear_sheet(<span class="keyword">const</span> <a class="code hl_class" href="../../d7/ddc/classpyfolio_1_1TimeSeries.html">TimeSeries&lt;Return&gt;</a>&amp; returns) {</div>
<div class="line">    pyfolio::visualization::PlotlyEnhanced plotter;</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Create interactive charts</span></div>
<div class="line">    <span class="keyword">auto</span> equity_curve = plotter.plot_cumulative_returns(returns);</div>
<div class="line">    <span class="keyword">auto</span> drawdown_plot = plotter.plot_drawdown(returns);</div>
<div class="line">    <span class="keyword">auto</span> monthly_heatmap = plotter.plot_monthly_returns_heatmap(returns);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Save to HTML</span></div>
<div class="line">    plotter.save_tear_sheet(<span class="stringliteral">&quot;portfolio_analysis.html&quot;</span>, {</div>
<div class="line">        equity_curve, drawdown_plot, monthly_heatmap</div>
<div class="line">    });</div>
<div class="line">}</div>
<div class="ttc" id="aplotly__enhanced_8h_html"><div class="ttname"><a href="../../d1/dcd/plotly__enhanced_8h.html">plotly_enhanced.h</a></div><div class="ttdoc">Enhanced Plotly visualization with interactive features.</div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md62"></a>
Troubleshooting</h1>
<h2><a class="anchor" id="autotoc_md63"></a>
Common Issues</h2>
<ol type="1">
<li><b>Compilation Errors</b> <div class="fragment"><div class="line"># Ensure C++20 support</div>
<div class="line">g++ --version  # Should be 11+ for GCC</div>
<div class="line">clang++ --version  # Should be 13+ for Clang</div>
</div><!-- fragment --></li>
<li><b>Missing Dependencies</b> <div class="fragment"><div class="line"># Dependencies are auto-fetched, but check network access</div>
<div class="line">cmake --build . --target all  # Re-run if network issues</div>
</div><!-- fragment --></li>
<li><b>Performance Issues</b> <div class="fragment"><div class="line"><span class="comment">// Enable compiler optimizations</span></div>
<div class="line">cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_CXX_FLAGS=<span class="stringliteral">&quot;-march=native&quot;</span> ..</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Check SIMD availability</span></div>
<div class="line"><span class="preprocessor">#ifdef PYFOLIO_HAS_AVX2</span></div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;AVX2 available&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
</div><!-- fragment --></li>
<li><b>Memory Issues</b> <div class="fragment"><div class="line"><span class="comment">// Use memory profiling</span></div>
<div class="line">cmake -DCMAKE_BUILD_TYPE=Debug -DENABLE_SANITIZER=ON ..</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Or use memory pools</span></div>
<div class="line">pyfolio::PoolAllocator&lt;Position&gt; allocator(100000);</div>
</div><!-- fragment --></li>
</ol>
<h2><a class="anchor" id="autotoc_md64"></a>
Debug Mode</h2>
<div class="fragment"><div class="line"># Build with debug information</div>
<div class="line">cmake -DCMAKE_BUILD_TYPE=Debug -DENABLE_COVERAGE=ON ..</div>
<div class="line">make</div>
<div class="line"> </div>
<div class="line"># Run with detailed error messages</div>
<div class="line">export PYFOLIO_DEBUG=1</div>
<div class="line">./your_program</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md65"></a>
Performance Profiling</h2>
<div class="fragment"><div class="line"># Build with profiling</div>
<div class="line">cmake -DCMAKE_BUILD_TYPE=RelWithDebInfo ..</div>
<div class="line"> </div>
<div class="line"># Profile with perf (Linux)</div>
<div class="line">perf record -g ./your_program</div>
<div class="line">perf report</div>
<div class="line"> </div>
<div class="line"># Or use built-in benchmarks</div>
<div class="line">./tests/performance_benchmarks</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md66"></a>
Next Steps</h1>
<ol type="1">
<li><b>Explore Examples</b>: Check the <code>examples/</code> directory for more complex use cases</li>
<li><b>Read API Documentation</b>: Browse the generated Doxygen docs at <code>build/docs/api/html/index.html</code></li>
<li><b>Performance Tuning</b>: See the optimization guide in <code>docs/PERFORMANCE.md</code></li>
<li><b>Contributing</b>: Read <code>CONTRIBUTING.md</code> for development guidelines</li>
</ol>
<h1><a class="anchor" id="autotoc_md67"></a>
Getting Help</h1>
<ul>
<li><b>Documentation</b>: Generated API docs in <code>build/docs/api/html/</code></li>
<li><b>Examples</b>: Complete examples in <code>examples/</code> directory</li>
<li><b>Issues</b>: Report bugs on GitHub Issues</li>
<li><b>Discussions</b>: Join the GitHub Discussions for questions</li>
</ul>
<p>Welcome to high-performance financial analysis with Pyfolio C++! </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun Jun 29 2025 12:06:36 for Pyfolio C++ by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
